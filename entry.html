<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MF Tracker</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

    <!-- jQuery (needed for Select2) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <link rel="stylesheet" href="style.css">

</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="#">MF Portfolio</a>

            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item active" style="margin-left: 200px; ">
                        <a class="nav-link" href="entry.html">Home </a>
                    </li>
                    <li class="nav-item" style="margin-left: 200px;">
                        <a class="nav-link" href="portfolio.html">Portfolio manager</a>
                    </li>
                    <li class="nav-item" style="margin-left: 200px;">
                        <a class="nav-link" href="performance.html">Performance manager</a>
                    </li>
                </ul>
                <div class="ml-auto">
                    <button id="btnLogout" class="btn btn-outline-light btn-sm">Logout</button>
                </div>
            </div>
        </nav>
    </header>

    <div class="card card-elevated">
        <h1>Welcome to the Mutual Fund Portfolio Tracker</h1>
        <p>This is where you can add an Mutual Fund entry to your database</p>
        <div>
            <input type="text" id="folioNumber" placeholder="Folio Number">
            <select id="holderName">
                <option value="">Select Holder</option>
                <option value="Ankit">Ankit</option>
                <option value="Avdhi">Avdhi</option>
                <option value="SCG">SCG</option>
                <option value="Suman">Suman</option>
            </select>
            <select id="nomineeName">
                <option value="">Select Nominee</option>
                <option value="Ankit">Ankit</option>
                <option value="Avdhi">Avdhi</option>
                <option value="SCG">SCG</option>
                <option value="Suman">Suman</option>
            </select>
            <select id="mfDropdown"></select>
            <input type="number" placeholder="MF Buying Price" id="buyingPrice">
            <input type="number" placeholder="Number of units bought" id="unitsBought">
            <select type="text" id="transactionType">
                <option>Type of Transaction?</option>
                <option value="buy">BUY</option>
                <option value="sell">SELL</option>
            </select>
            <input type="date" id="transactionDate" placeholder="DD/MM/YYYY">
            <select type="text" id="investmentApp">
                <option>Invested From?</option>
                <option value="direct">Direct</option>
                <option value="amit">Amit</option>
                <option value="rkb">RKB</option>
                <option value="fisdom">Fisdom</option>
            </select>
            <input type="text" id="bankName" placeholder="Bank Name">

            <button id="addEntry">Add Entry</button>

        </div>
    </div>

    <div class="card card-elevated mt-4">
        <h2>Create SIP Plan</h2>
        <p>Add an SIP that will auto-schedule monthly investments into your database.</p>
        <div>
            <!-- Reuse same holder and scheme selector for consistency -->
            <input type="text" id="sipFolioNumber" placeholder="Folio Number">
            <select id="sipHolderName">
                <option value="">Select Holder</option>
                <option value="Ankit">Ankit</option>
                <option value="Avdhi">Avdhi</option>
                <option value="SCG">SCG</option>
                <option value="Suman">Suman</option>
            </select> <select id="sipMfDropdown"></select>
            <select id="sipNomineeName">
                <option value="">Select Nominee</option>
                <option value="Ankit">Ankit</option>
                <option value="Avdhi">Avdhi</option>
                <option value="SCG">SCG</option>
                <option value="Suman">Suman</option>
            </select>   


            <!-- SIP-specific inputs -->
            <input type="date" id="sipStartDate" placeholder="SIP start date" title="SIP start date (first deduction)">
            <input type="number" id="sipMonths" min="1" step="1" placeholder="Number of months"
                title="How many months this SIP should run">
            <input type="number" id="sipAmountPerMonth" min="1" step="0.01"
                placeholder="Amount deposited every month (â‚¹)" title="Monthly SIP amount in INR">
            <select type="text" id="sipInvestmentApp">
                <option>Invested From?</option>
                <option value="direct">Direct</option>
                <option value="amit">Amit</option>
                <option value="rkb">RKB</option>
                <option value="fisdom">Fisdom</option>
            </select>

            <input type="text" id="sipBankName" placeholder="Bank Name">
            
            <!-- Action -->
            <button id="addSipPlan">Add SIP Plan</button>
        </div>
    </div>


    <div id="statusArea" class="mt-3"></div>

    <script>
        const sbClient = supabase.createClient(
            'https://sipdpipypzytffciqfvq.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNpcGRwaXB5cHp5dGZmY2lxZnZxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NDQ5MTAsImV4cCI6MjA3MDQyMDkxMH0.ruip7VfwgPhG4saY2U_5J-CtQJSl3I4_qelHZxTp44I'
        );
        window.sb = sbClient;

        document.getElementById('btnLogout')?.addEventListener('click', async () => {
            await sbClient.auth.signOut();
            window.location.href = 'index.html';
        });
    </script>
    <script src="script.js"></script>
</body>

</html>